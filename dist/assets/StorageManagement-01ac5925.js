import{r as s,j as r,a as e,Q as c}from"./index-113eb709.js";import{a as l}from"./axios-439bb627.js";const b=()=>{const[a,n]=s.useState([]);s.useEffect(()=>{(async()=>{try{const o=await l.get("http://localhost:3001/api/storage/accounts",{withCredentials:!0});n(o.data.storageAccounts)}catch(o){console.error("Error fetching storage accounts:",o),c.error("Failed to fetch storage accounts.")}})()},[]);const d=()=>{window.location.href="http://localhost:3001/api/storage/connect/google"},i=()=>{window.location.href="http://localhost:3001/api/storage/connect/onedrive"},h=async t=>{try{await l.delete(`http://localhost:3001/api/storage/accounts/${t}`,{withCredentials:!0}),n(o=>o.filter(g=>g.id!==t)),c.success("Storage account disconnected successfully.")}catch(o){console.error("Error disconnecting storage account:",o),c.error("Failed to disconnect storage account.")}};return r("div",{children:[e("h2",{className:"text-2xl mb-4",children:"Manage Cloud Storage Accounts"}),r("div",{className:"mb-6 flex space-x-4",children:[e("button",{onClick:d,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition duration-200",children:"Connect Google Drive"}),e("button",{onClick:i,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition duration-200",children:"Connect OneDrive"})]}),e("h3",{className:"text-xl mb-2",children:"Connected Accounts"}),a.length>0?e("div",{className:"overflow-x-auto",children:r("table",{className:"min-w-full bg-white shadow-md rounded-lg overflow-hidden",children:[e("thead",{className:"bg-gray-200",children:r("tr",{children:[e("th",{className:"py-2 px-4 border-b",children:"ID"}),e("th",{className:"py-2 px-4 border-b",children:"Storage Type"}),e("th",{className:"py-2 px-4 border-b",children:"Account Name"}),e("th",{className:"py-2 px-4 border-b",children:"Actions"})]})}),e("tbody",{children:a.map(t=>r("tr",{className:"hover:bg-gray-100",children:[e("td",{className:"py-2 px-4 border-b",children:t.id}),e("td",{className:"py-2 px-4 border-b",children:t.storage_type.toUpperCase()}),e("td",{className:"py-2 px-4 border-b",children:t.account_name}),e("td",{className:"py-2 px-4 border-b",children:e("button",{onClick:()=>h(t.id),className:"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition duration-200",children:"Disconnect"})})]},t.id))})]})}):e("p",{children:"No storage accounts connected."})]})};export{b as default};
