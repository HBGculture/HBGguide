import{r as i,j as r,a as e,Q as t}from"./index-113eb709.js";import{a as n}from"./axios-439bb627.js";const p=()=>{const[o,c]=i.useState([]),[l,s]=i.useState({email:"",password:"",role:"Viewer"});return i.useEffect(()=>{(async()=>{try{const d=await n.get("http://localhost:3001/api/auth/admins",{withCredentials:!0});c(d.data.admins)}catch(d){console.error("Error fetching admins:",d),t.error("Failed to fetch admins.")}})()},[]),r("div",{children:[e("h2",{className:"text-2xl mb-4",children:"User Management"}),r("div",{className:"mb-6",children:[e("h3",{className:"text-xl mb-2",children:"Add New Admin"}),r("form",{onSubmit:async a=>{a.preventDefault();try{await n.post("http://localhost:3001/api/auth/signup",l,{withCredentials:!0}),t.success("Admin added successfully."),s({email:"",password:"",role:"Viewer"});const d=await n.get("http://localhost:3001/api/auth/admins",{withCredentials:!0});c(d.data.admins)}catch(d){console.error("Error adding admin:",d),t.error("Failed to add admin.")}},className:"bg-white p-4 rounded shadow",children:[r("div",{className:"mb-4",children:[e("label",{htmlFor:"email",className:"block text-gray-700 font-medium mb-1",children:"Email:"}),e("input",{type:"email",id:"email",placeholder:"Email",value:l.email,onChange:a=>s({...l,email:a.target.value}),className:"border p-2 w-full rounded",required:!0,"aria-label":"Admin Email"})]}),r("div",{className:"mb-4",children:[e("label",{htmlFor:"password",className:"block text-gray-700 font-medium mb-1",children:"Password:"}),e("input",{type:"password",id:"password",placeholder:"Password",value:l.password,onChange:a=>s({...l,password:a.target.value}),className:"border p-2 w-full rounded",required:!0,"aria-label":"Admin Password"})]}),r("div",{className:"mb-4",children:[e("label",{htmlFor:"role",className:"block text-gray-700 font-medium mb-1",children:"Role:"}),r("select",{id:"role",value:l.role,onChange:a=>s({...l,role:a.target.value}),className:"border p-2 w-full rounded","aria-label":"Admin Role",children:[e("option",{value:"Viewer",children:"Viewer"}),e("option",{value:"Editor",children:"Editor"}),e("option",{value:"Manager",children:"Manager"})]})]}),e("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition duration-200 w-full",children:"Add Admin"})]})]}),r("div",{children:[e("h3",{className:"text-xl mb-2",children:"Existing Admins"}),o.length>0?e("div",{className:"overflow-x-auto",children:r("table",{className:"min-w-full bg-white shadow-md rounded-lg overflow-hidden",children:[e("thead",{className:"bg-gray-200",children:r("tr",{children:[e("th",{className:"py-2 px-4 border-b",children:"ID"}),e("th",{className:"py-2 px-4 border-b",children:"Email"}),e("th",{className:"py-2 px-4 border-b",children:"Role"})]})}),e("tbody",{children:o.map(a=>r("tr",{className:"hover:bg-gray-100",children:[e("td",{className:"py-2 px-4 border-b",children:a.id}),e("td",{className:"py-2 px-4 border-b",children:a.email}),e("td",{className:"py-2 px-4 border-b",children:a.role})]},a.id))})]})}):e("p",{children:"No admins found."})]})]})};export{p as default};
